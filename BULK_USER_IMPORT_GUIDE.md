# מדריך ייבוא וייצוא משתמשים מ-CSV

## סקירה כללית

תכונות ייבוא וייצוא המשתמשים מ-CSV מאפשרות למנהלי המערכת:
- להוסיף מספר משתמשים בבת אחת באמצעות קובץ CSV (ייבוא)
- לייצא את רשימת המשתמשים הקיימים לקובץ CSV (ייצוא)

## ייבוא משתמשים

### 1. גישה לתכונה
- היכנס לפאנל הניהול (`/admin`)
- בחר בכפתור "ייבוא משתמשים מ-CSV" (כחול)

### 2. בחירת מצב
- **יצירה ישירה**: יוצר משתמשים ישירות במערכת עם סיסמאות
- **שליחת הזמנות**: שולח הזמנות למשתמשים להרשמה עצמית

### 3. הורדת תבנית
- לחץ על "הורדת תבנית" כדי לקבל קובץ CSV עם הכותרות הנכונות
- התבנית משתנה בהתאם למצב שנבחר

### 4. מילוי הנתונים
ערוך את קובץ ה-CSV עם נתוני המשתמשים:

#### שדות נדרשים:
- **email**: כתובת מייל (חובה)

#### שדות אופציונליים:
- **username**: שם משתמש (אם לא מוזן, ישתמש בכתובת המייל)
- **role**: תפקיד (student/instructor/moderator/admin, ברירת מחדל: student)
- **organization**: שם הארגון (חייב להתאים בדיוק לארגון קיים במערכת)
- **password**: סיסמה (נדרש רק במצב יצירה ישירה, לפחות 6 תווים)

### 5. העלאת הקובץ
- בחר את קובץ ה-CSV שערכת
- המערכת תציג תצוגה מקדימה של הנתונים
- משתמשים תקינים יוצגו ברקע ירוק, לא תקינים ברקע אדום

### 6. ביצוע הייבוא
- לחץ על כפתור הייבוא
- המערכת תציג תוצאות מפורטות של הייבוא

## דוגמאות לקבצי CSV

### מצב הזמנות:
```csv
email,username,role,organization
student1@example.com,תלמיד ראשון,student,
teacher@example.com,מורה,instructor,בית ספר א
admin@example.com,מנהל,admin,בית ספר א
```

### מצב יצירה ישירה:
```csv
email,username,password,role,organization
student1@example.com,תלמיד ראשון,password123,student,
teacher@example.com,מורה,teacherpass456,instructor,בית ספר א
admin@example.com,מנהל,adminpass789,admin,בית ספר א
```

## הערות חשובות

1. **תפקידים תקינים**: student, instructor, moderator, admin
2. **ארגונים**: שמות הארגונים חייבים להתאים בדיוק לארגונים הקיימים במערכת
3. **סיסמאות**: במצב יצירה ישירה, נדרשת סיסמה באורך של לפחות 6 תווים
4. **כתובות מייל**: חייבות להיות תקינות ויחודיות במערכת
5. **קידוד**: השתמש בקידוד UTF-8 לתמיכה בעברית

## פתרון בעיות

### שגיאות נפוצות:
- **"משתמש כבר קיים"**: כתובת המייל כבר רשומה במערכת
- **"ארגון לא נמצא"**: שם הארגון לא תואם לארגון קיים
- **"תפקיד לא תקין"**: השתמש רק בתפקידים המותרים
- **"סיסמה קצרה מדי"**: סיסמה חייבת להיות לפחות 6 תווים

### טיפים:
- בדוק את התצוגה המקדימה לפני הייבוא
- התחל עם קובץ קטן לבדיקה
- שמור עותק של הקובץ המקורי לפני עריכה

## ייצוא משתמשים

### איך לייצא
1. בפאנל הניהול, לחץ על כפתור "ייצוא ל-CSV" (ירוק)
2. הקובץ יורד אוטומטית עם שם `users_export_YYYY-MM-DD.csv`
3. הקובץ כולל את כל המשתמשים הקיימים במערכת

### מה כלול בייצוא
- כתובת מייל
- שם משתמש
- תפקיד
- שם ארגון (אם קיים)

### שימושים לייצוא
- גיבוי נתוני משתמשים
- עריכה מרובה של משתמשים קיימים
- העברת נתונים למערכות אחרות
- יצירת דוחות

## זרימת עבודה מומלצת

1. **ייצא** את המשתמשים הקיימים לקובץ CSV
2. **ערוך** את הקובץ או צור קובץ חדש עם משתמשים נוספים
3. **השתמש בתבנית** המתאימה למצב שבחרת
4. **ייבא** את הקובץ המעודכן
5. **בדוק** את התוצאות ותקן שגיאות במידת הצורך